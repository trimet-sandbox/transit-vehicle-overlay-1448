{"version":3,"sources":["../../../src/components/VehicleGeometry/index.js"],"names":["coreUtils","React","PropTypes","useLeaflet","CircledVehicle","linterIgnoreTheseProps","VehicleGeometry","props","zoom","vehicle","isTracked","onVehicleClicked","onRecenterMap","color","highlightColor","MarkerSlot","PopupSlot","TooltipSlot","map","lat","lon","propTypes","number","isRequired","types","transitVehicleType","bool","func","string","defaultProps"],"mappings":"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","sourcesContent":["import coreUtils from \"@opentripplanner/core-utils\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useLeaflet } from \"react-leaflet\";\r\n\r\nimport { CircledVehicle } from \"../markers/ModeCircles\";\r\nimport { linterIgnoreTheseProps } from \"../../utils\";\r\n\r\n/**\r\n * presentational component for rendering transit vehicle positions atop a map\r\n * will show both point positions for a collection of vehicles, as well as being\r\n * able to render a 'selected' vehicle\r\n */\r\nexport default function VehicleGeometry(props) {\r\n  const {\r\n    zoom,\r\n    vehicle,\r\n    isTracked,\r\n    onVehicleClicked,\r\n    onRecenterMap,\r\n    color,\r\n    highlightColor,\r\n    MarkerSlot,\r\n    PopupSlot,\r\n    TooltipSlot\r\n  } = props;\r\n\r\n  // recenter the map to focus on selected vehicle\r\n  if (isTracked && onRecenterMap) {\r\n    // TODO: very leaflet specific - e.g., mb geo\r\n    const { map } = useLeaflet();\r\n    onRecenterMap(map, vehicle.lat, vehicle.lon);\r\n  }\r\n\r\n  return (\r\n    <MarkerSlot\r\n      zoom={zoom}\r\n      vehicle={vehicle}\r\n      isTracked={isTracked}\r\n      onVehicleClicked={onVehicleClicked}\r\n      color={color}\r\n      highlightColor={highlightColor}\r\n    >\r\n      {PopupSlot && <PopupSlot vehicle={vehicle} isTracked={isTracked} />}\r\n      {TooltipSlot && <TooltipSlot vehicle={vehicle} isTracked={isTracked} />}\r\n    </MarkerSlot>\r\n  );\r\n}\r\n\r\nVehicleGeometry.propTypes = {\r\n  /** map zoom: is part of the props due to redrawing this layer on map zoom */\r\n  zoom: PropTypes.number.isRequired,\r\n\r\n  /** required vehicle record for the vehicle */\r\n  vehicle: coreUtils.types.transitVehicleType.isRequired,\r\n\r\n  isTracked: PropTypes.bool,\r\n\r\n  /** Callback fired when the vehicle is clicked (vehicle: object) => {} */\r\n  onVehicleClicked: PropTypes.func,\r\n\r\n  /** will pan the map to the coordinates of the selected vehicle */\r\n  onRecenterMap: PropTypes.func,\r\n\r\n  /**\r\n   * A custom leaflet marker component with the signature\r\n   * ({vehicle: object, onVehicleClicked: (vehicle) => {}, children: Element}) => Element\r\n   */\r\n  MarkerSlot: PropTypes.func,\r\n\r\n  /** optional / customizable popup slot */\r\n  PopupSlot: PropTypes.func,\r\n\r\n  /** optional / customizable tooltip slot */\r\n  TooltipSlot: PropTypes.func,\r\n\r\n  /** fill color of a vehicle */\r\n  color: PropTypes.string,\r\n\r\n  /** fill color of a tracked vehicle (see isTracked above) */\r\n  highlightColor: PropTypes.string\r\n};\r\n\r\nVehicleGeometry.defaultProps = {\r\n  isTracked: false,\r\n  onVehicleClicked: (vehicle, isTracked) => {\r\n    linterIgnoreTheseProps(vehicle, isTracked);\r\n  },\r\n  onRecenterMap: null,\r\n  MarkerSlot: CircledVehicle,\r\n  PopupSlot: null,\r\n  TooltipSlot: null,\r\n  color: \"\",\r\n  highlightColor: \"\"\r\n};\r\n"],"file":"index.js"}
{"version":3,"sources":["../../src/utils/graphics.js"],"names":["coreUtils","PropTypes","React","ReactDOMServer","styled","L","cloneDeep","RotatedMarker","linterIgnoreTheseProps","renderAsImage","icon","size","anchor","pop","tt","cls","x","y","Math","round","retVal","divIcon","html","renderToString","className","iconSize","iconAnchor","popupAnchor","tooltipAnchor","setColor","color","obj","makeBasicVehicleShape","NormalShape","TrackedShape","getSize","Shape","highlightColor","isTracked","zoom","propTypes","string","bool","number","defaultProps","makeVehicleIcon","Styled","mode","makeModeStyles","normal","tracked","busIcon","railIcon","tramIcon","streetcarIcon","gondolaIcon","NormBus","TrackedBus","NormRail","TrackedRail","NormTram","TrackedTram","NormSC","TrackedSC","NormGond","TrackedGond","makeRotatedMarker","Icon","VehicleMarker","children","onVehicleClicked","vehicle","lat","lon","heading","routeType","arrayOf","element","func","types","transitVehicleType","isRequired"],"mappings":"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","sourcesContent":["import coreUtils from \"@opentripplanner/core-utils\";\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport ReactDOMServer from \"react-dom/server\";\r\nimport styled from \"styled-components\";\r\nimport L from \"leaflet\";\r\nimport cloneDeep from \"lodash.clonedeep\";\r\n\r\nimport RotatedMarker from \"../components/markers/RotatedMarker\";\r\nimport { linterIgnoreTheseProps } from \"./data\";\r\n\r\n/**\r\n * helper to render a React .svg structure, ala icons/Bus.js as a leaflet marker\r\n *\r\n * @param icon\r\n * @param size\r\n * @param anchor\r\n * @param pop\r\n * @param tt\r\n * @param cls\r\n */\r\nexport function renderAsImage(\r\n  icon,\r\n  size = [22, 22],\r\n  anchor = null,\r\n  pop = null,\r\n  tt = null,\r\n  cls = \"\"\r\n) {\r\n  const x = size[0];\r\n  const y = size[1];\r\n\r\n  // debugger;\r\n  if (!pop) pop = [0, 0];\r\n  if (!tt) tt = [0, 0];\r\n  if (!anchor) anchor = [Math.round(x / 2), Math.round(y / 2)];\r\n\r\n  const retVal = L.divIcon({\r\n    html: ReactDOMServer.renderToString(icon),\r\n    className: cls,\r\n    iconSize: size,\r\n    iconAnchor: anchor,\r\n    popupAnchor: pop,\r\n    tooltipAnchor: tt\r\n  });\r\n  return retVal;\r\n}\r\n\r\n/**\r\n * will take an input object (e.g., probably a defaultProp representing a leaflet style),\r\n * deep copy that object, and return back a new obj with the .color set\r\n *\r\n * @param color\r\n * @param obj\r\n * @return deep copied object with color set\r\n */\r\nexport function setColor(color, obj) {\r\n  const retVal = cloneDeep(obj);\r\n  retVal.color = color;\r\n  return retVal;\r\n}\r\n\r\n/**\r\n * Associates two shapes, one for rendering tracked vehicles, and one for untracked vehicles,\r\n * and optionally renders a size (number) prop determined by the optional getSize function argument.\r\n */\r\nexport const makeBasicVehicleShape = (NormalShape, TrackedShape, getSize) => {\r\n  const Shape = ({ color, highlightColor, isTracked, zoom }) => {\r\n    const size = getSize && getSize(zoom);\r\n    return isTracked ? (\r\n      <TrackedShape color={color} colorselected={highlightColor} size={size} />\r\n    ) : (\r\n      <NormalShape color={color} colorselected={highlightColor} size={size} />\r\n    );\r\n  };\r\n\r\n  Shape.propTypes = {\r\n    /** fill color (#AABBCC format) for all (non-tracked) map vehicle markers */\r\n    color: PropTypes.string,\r\n\r\n    /** fill color of tracked vehicle */\r\n    highlightColor: PropTypes.string,\r\n\r\n    /** tracking boolean + colors all work to color the marker */\r\n    isTracked: PropTypes.bool,\r\n\r\n    /** map zoom: is part of the props due to redrawing this layer on map zoom */\r\n    zoom: PropTypes.number\r\n  };\r\n\r\n  Shape.defaultProps = {\r\n    color: \"\",\r\n    highlightColor: \"\",\r\n    isTracked: false,\r\n    zoom: null\r\n  };\r\n\r\n  return Shape;\r\n};\r\n\r\n/**\r\n * makes a circular marker icon with a vehicle image based on mode\r\n *\r\n * @param Styled\r\n * @param mode\r\n * @param color\r\n * @param highlightColor\r\n * @param isTracked\r\n * @return marker object\r\n */\r\nexport function makeVehicleIcon(\r\n  Styled,\r\n  mode,\r\n  color,\r\n  highlightColor,\r\n  isTracked\r\n) {\r\n  let icon;\r\n  switch (mode) {\r\n    case \"TRAM\":\r\n      icon = isTracked ? (\r\n        <Styled.TrackedTram color={color} colorselected={highlightColor} />\r\n      ) : (\r\n        <Styled.NormTram color={color} colorselected={highlightColor} />\r\n      );\r\n      break;\r\n    case \"SC\":\r\n      icon = isTracked ? (\r\n        <Styled.TrackedSC color={color} colorselected={highlightColor} />\r\n      ) : (\r\n        <Styled.NormSC color={color} colorselected={highlightColor} />\r\n      );\r\n      break;\r\n    case \"GONDOLA\":\r\n      icon = isTracked ? (\r\n        <Styled.TrackedGond color={color} colorselected={highlightColor} />\r\n      ) : (\r\n        <Styled.NormGond color={color} colorselected={highlightColor} />\r\n      );\r\n      break;\r\n    case \"RAIL\":\r\n    case \"SUBWAY\":\r\n      icon = isTracked ? (\r\n        <Styled.TrackedRail color={color} colorselected={highlightColor} />\r\n      ) : (\r\n        <Styled.NormRail color={color} colorselected={highlightColor} />\r\n      );\r\n      break;\r\n    case \"BUS\":\r\n      icon = isTracked ? (\r\n        <Styled.TrackedBus color={color} colorselected={highlightColor} />\r\n      ) : (\r\n        <Styled.NormBus color={color} colorselected={highlightColor} />\r\n      );\r\n      break;\r\n    default:\r\n      icon = isTracked ? (\r\n        <Styled.TrackedShape color={color} colorselected={highlightColor} />\r\n      ) : (\r\n        <Styled.Shape color={color} colorselected={highlightColor} />\r\n      );\r\n      break;\r\n  }\r\n  return icon;\r\n}\r\n\r\n/**\r\n * different icons per mode is repeated in multiple places. This helper function is reused\r\n * in multiple places to apply a normal and tracked style, based on various transit modes\r\n *\r\n * @param normal\r\n * @param tracked\r\n * @param busIcon\r\n * @param railIcon\r\n * @param tramIcon\r\n * @param streetcarIcon\r\n * @param gondolaIcon\r\n * @return {array} - styled icon objects (two for each mode, ala tracked and normal styles)\r\n */\r\nexport function makeModeStyles(\r\n  normal,\r\n  tracked,\r\n  busIcon,\r\n  railIcon,\r\n  tramIcon,\r\n  streetcarIcon,\r\n  gondolaIcon\r\n) {\r\n  if (!railIcon) railIcon = busIcon;\r\n  if (!tramIcon) tramIcon = railIcon;\r\n  if (!streetcarIcon) streetcarIcon = railIcon;\r\n  if (!gondolaIcon) gondolaIcon = busIcon;\r\n\r\n  const NormBus = styled(busIcon)`\r\n    ${normal}\r\n  `;\r\n\r\n  const TrackedBus = styled(NormBus)`\r\n    ${tracked}\r\n  `;\r\n\r\n  const NormRail = styled(railIcon)`\r\n    ${normal}\r\n  `;\r\n\r\n  const TrackedRail = styled(NormRail)`\r\n    ${tracked}\r\n  `;\r\n\r\n  const NormTram = styled(tramIcon)`\r\n    ${normal}\r\n  `;\r\n\r\n  const TrackedTram = styled(NormTram)`\r\n    ${tracked}\r\n  `;\r\n\r\n  const NormSC = styled(streetcarIcon)`\r\n    ${normal}\r\n  `;\r\n\r\n  const TrackedSC = styled(NormSC)`\r\n    ${tracked}\r\n  `;\r\n\r\n  const NormGond = styled(gondolaIcon)`\r\n    ${normal}\r\n  `;\r\n\r\n  const TrackedGond = styled(NormGond)`\r\n    ${tracked}\r\n  `;\r\n\r\n  return [\r\n    NormBus,\r\n    TrackedBus,\r\n    NormRail,\r\n    TrackedRail,\r\n    NormTram,\r\n    TrackedTram,\r\n    NormSC,\r\n    TrackedSC,\r\n    NormGond,\r\n    TrackedGond\r\n  ];\r\n}\r\n\r\n/**\r\n * Renders the provided Icon with a RotatedMarker component (for rendering rotated vehicle symbols)\r\n * and make the component render the icon with the size returned by the optional getSize function argument.\r\n */\r\nexport const makeRotatedMarker = (Icon, getSize) => {\r\n  const VehicleMarker = ({\r\n    children,\r\n    color,\r\n    highlightColor,\r\n    isTracked,\r\n    onVehicleClicked,\r\n    vehicle,\r\n    zoom\r\n  }) => {\r\n    if (!vehicle) {\r\n      return null;\r\n    }\r\n    const { lat, lon, heading } = vehicle;\r\n    const icon = (\r\n      <Icon\r\n        color={color}\r\n        highlightColor={highlightColor}\r\n        isTracked={isTracked}\r\n        routeType={vehicle.routeType}\r\n        zoom={zoom}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <RotatedMarker\r\n        icon={renderAsImage(icon, getSize && getSize(zoom))}\r\n        position={[lat, lon]}\r\n        rotationAngle={heading}\r\n        rotationOrigin=\"center center\"\r\n        onClick={() => onVehicleClicked(vehicle, isTracked)}\r\n        zIndexOffset={isTracked ? 1000 : 0}\r\n      >\r\n        {children}\r\n      </RotatedMarker>\r\n    );\r\n  };\r\n\r\n  VehicleMarker.propTypes = {\r\n    /** React children */\r\n    children: PropTypes.arrayOf(PropTypes.element),\r\n\r\n    /** fill color (#AABBCC format) for all (non-tracked) map vehicle markers */\r\n    color: PropTypes.string,\r\n\r\n    /** fill color of tracked vehicle */\r\n    highlightColor: PropTypes.string,\r\n\r\n    /** tracking boolean + colors all work to color the marker */\r\n    isTracked: PropTypes.bool,\r\n\r\n    /** Callback fired when the vehicle marker is clicked (vehicle: object) => {} */\r\n    onVehicleClicked: PropTypes.func,\r\n\r\n    /** vehicle record  - @see: core-utils/types/transitVehicleType */\r\n    vehicle: coreUtils.types.transitVehicleType.isRequired,\r\n\r\n    /** map zoom: is part of the props due to redrawing this layer on map zoom */\r\n    zoom: PropTypes.number\r\n  };\r\n\r\n  VehicleMarker.defaultProps = {\r\n    children: null,\r\n    color: \"\",\r\n    highlightColor: \"\",\r\n    isTracked: false,\r\n    onVehicleClicked: (vehicle, isTracked) => {\r\n      linterIgnoreTheseProps(vehicle, isTracked);\r\n    },\r\n    zoom: null\r\n  };\r\n\r\n  return VehicleMarker;\r\n};\r\n"],"file":"graphics.js"}